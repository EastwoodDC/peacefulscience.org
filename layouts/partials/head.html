{{- if eq .Kind "home" -}}
  {{- $.Scratch.Set "Description" ( .Site.Params.description | default "The main page" ) -}}
  {{- $.Scratch.Set "Title" .Site.Title -}}
{{- else -}}
  {{- $.Scratch.Set "Description" ( .Description | default .Params.subtitle | default .Summary | default .Kind ) -}}
  {{- $.Scratch.Set "Title" ( .Title | default .Site.Title ) -}}
{{- end }}

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">


<!-- Site Title, Description, Author, and Favicon -->
{{- with ($.Scratch.Get "Title") }}
<title>{{ print . }}</title>
<meta name="og:title" content="{{ . }}"/>
<meta name="title" content="{{ . }}"/>
{{- end -}}
{{- with ($.Scratch.Get "Description") }}
<meta name="description" content="{{ . }}"/>
<meta name="og:description" content="{{ . }}"/>
{{- end }}
<meta name="og:type" content="article"/>
<meta name="og:url" content="{{ .Permalink | absURL }}"/>
<meta name="og:site_name" content="{{ .Site.Title }}"/>

{{ with .Params.headerimage.src }}
<meta name="og:image" content="{{- . -}}"/>
{{ end }}

{{ with .Params.DOI }}
<meta name="doi" content="{{- . -}}"/>
{{ end }}


{{ with .Params.authors }}
    {{- range . }}
      {{- with $.Site.GetPage "taxonomyTerm" (printf "authors/%s" (urlize .)) }}
<meta name="author" content="{{ .Title }}"/>
      {{- end }}
    {{- end }}
{{ end }}
    

{{- with .Site.Params.favicon }}
    <link href='{{ . | absURL }}' rel='icon' type='image/x-icon'/>
{{- end -}}

<!-- SEO -->
{{- partial "seo/main.html" . -}}

{{- $showBreadcrumbs := $.Params.showBreadcrumbs | default $.Site.Params.showBreadcrumbs | default true }}
{{ if and ( eq $showBreadcrumbs true ) ( eq .IsHome false ) -}}
  {{ partial "breadcrumbs.html" ( dict "ctx" . "output_type" "structured" ) }}
{{- end }}

<!-- Social Media Tags -->
{{- partial "social/main.html" . -}}

<!-- Links and stylesheets -->

    {{- partial "head_custom.html" . -}}

    <link rel="stylesheet" href="/css/theme.css">


<script src="navprogress.js"></script>






{{ if not .Site.IsServer }}
{{ template "_internal/google_analytics_async.html" . -}}


<script type='text/javascript' src='https://cdn.onesignal.com/sdks/OneSignalSDK.js?ver=5.6' async='async' id='remote_sdk-js'></script>



<script>
      window.OneSignal = window.OneSignal || [];

      OneSignal.push( function() {
        OneSignal.SERVICE_WORKER_UPDATER_PATH = "OneSignalSDKUpdaterWorker.js.php";
        OneSignal.SERVICE_WORKER_PATH = "OneSignalSDKWorker.js.php";
        OneSignal.SERVICE_WORKER_PARAM = { scope: '/' };

        OneSignal.setDefaultNotificationUrl("https://peacefulscience.org");
        var oneSignal_options = {};
        window._oneSignalInitOptions = oneSignal_options;

oneSignal_options['appId'] = '3f375261-7ee3-4a7a-bd37-34219a6ac3c6';
oneSignal_options['allowLocalhostAsSecureOrigin'] = true;
oneSignal_options['welcomeNotification'] = { };
oneSignal_options['welcomeNotification']['title'] = "";
oneSignal_options['welcomeNotification']['message'] = "";
oneSignal_options['path'] = "https://peacefulscience.org/wp-content/plugins/onesignal-free-web-push-notifications/sdk_files/";
oneSignal_options['safari_web_id'] = "N2I3NjAwNTktZDhhZi00MjI1LWE2MmEtMGYxYzM5NjYxMTdj";
oneSignal_options['promptOptions'] = { };
oneSignal_options['notifyButton'] = { };
oneSignal_options['notifyButton']['enable'] = true;
oneSignal_options['notifyButton']['position'] = 'bottom-left';
oneSignal_options['notifyButton']['theme'] = 'inverse';
oneSignal_options['notifyButton']['size'] = 'medium';
oneSignal_options['notifyButton']['showCredit'] = false;
oneSignal_options['notifyButton']['text'] = {};
oneSignal_options['notifyButton']['colors'] = {};
oneSignal_options['notifyButton']['colors']['circle.background'] = 'black';
oneSignal_options['notifyButton']['colors']['circle.foreground'] = 'white';
oneSignal_options['notifyButton']['colors']['badge.background'] = 'black';
oneSignal_options['notifyButton']['colors']['badge.foreground'] = 'white';
oneSignal_options['notifyButton']['colors']['badge.bordercolor'] = 'black';
oneSignal_options['notifyButton']['colors']['pulse.color'] = '#006600';
oneSignal_options['notifyButton']['colors']['dialog.button.background'] = '#006600';
oneSignal_options['notifyButton']['colors']['dialog.button.background.hovering'] = '#006600';
oneSignal_options['notifyButton']['colors']['dialog.button.background.active'] = '#006600';
oneSignal_options['notifyButton']['colors']['dialog.button.foreground'] = 'white';
                OneSignal.init(window._oneSignalInitOptions);
                OneSignal.showSlidedownPrompt();      });

      function documentInitOneSignal() {
        var oneSignal_elements = document.getElementsByClassName("OneSignal-prompt");

        var oneSignalLinkClickHandler = function(event) { OneSignal.push(['registerForPushNotifications']); event.preventDefault(); };        for(var i = 0; i < oneSignal_elements.length; i++)
          oneSignal_elements[i].addEventListener('click', oneSignalLinkClickHandler, false);
      }

      if (document.readyState === 'complete') {
           documentInitOneSignal();
      }
      else {
           window.addEventListener("load", function(event){
               documentInitOneSignal();
          });
      }
    </script>
{{ end }}

