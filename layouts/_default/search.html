{{ define "head" }}
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.3.1/themes/reset-min.css" integrity="sha256-t2ATOGCtAIZNnzER679jwcFcKYfLlw01gli6F6oszk8=" crossorigin="anonymous">

   <meta name="turbo-visit-control" content="reload">
{{ partial "jsonld" . }}
{{ end }}

{{ define "main" }}
<div class="bg-white">


<div class="gae-header-bg shadow" style="z-index:100;position: relative;">

<div style="height: 40px; width: 100%"></div>
<div class="container">
  <div class="row pt-5 pb-5 justify-content-center text-white">


  <div class="col-12">
        <h1 class="text-white">
  <div id="search-box">
    <!-- SearchBox widget will appear here -->
  </div>
  </h1>


    <div id="current-refinements"></div>


  </div>

  </div>
</div>
</div>


<div class="article-grid">

<div class="article-body pb-5 clearfix" style="z-index:10">
<div id="hits" ></div>
<div id="pagination"></div>
</div>


<div class="left-sidebar" style="height: 100%;">
  <div style="position: relative">
   <div class="position-sticky pl-5 py-5" style="top:0%; width: 100%; background: white">



<div class="mt-3" id="accordion">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h3 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
           Categories
        </button>
      </h3>
    </div>

    <div id="collapseOne" class="collapse show" aria-labelledby="Categories" data-parent="#accordion">
      <div class="card-body">

      <div id="category-refinement-list">
       <!-- RefinementList widget will appear here -->
      </div>

      </div>
    </div>
  </div>
</div>
<div id="accordion2">
  <div class="card">
    <div class="card-header" id="headingTwo">
      <h3 class="mb-0">
        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
           Authors
        </button>
      </h3>
    </div>

    <div id="collapseTwo" class="collapse show" aria-labelledby="Authors" data-parent="#accordion2">
      <div class="card-body">

      <div id="author-refinement-list">
       <!-- RefinementList widget will appear here -->
      </div>

      </div>
    </div>
  </div>
</div>




   </div>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js" integrity="sha256-EXPXz4W6pQgfYY3yTpnDa3OH8/EPn16ciVsPQ/ypsjk=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js" integrity="sha256-LAGhRRdtVoD6RLo2qDQsU2mp+XVSciKRC8XPOBWmofM=" crossorigin="anonymous"></script>

<script>

(()=>{
console.info("initializing algolia");

const searchClient = algoliasearch('4ODX85RSXK', 'dd433740546fc182c8ec1df6a7b16cf9');


const search = instantsearch({
  indexName: 'PeacefulScience',
  limit: 5,
  routing: true,
  searchClient
});

  // initialize RefinementList
  search.addWidget(
    instantsearch.widgets.refinementList({
      container: '#category-refinement-list',
      limit: 10,
      showMore: true,
      attribute: 'categories'
    })
  );

    // initialize RefinementList
  search.addWidget(
    instantsearch.widgets.refinementList({
      container: '#author-refinement-list',
      limit: 10,
      showMore: true,
      attribute: 'authors'
    })
  );

  // initialize SearchBox
  search.addWidget(
    instantsearch.widgets.searchBox({
      container: '#search-box',
      placeholder: 'Search...'
    })
  );

  search.addWidget(
    instantsearch.widgets.currentRefinements({
      container: "#current-refinements",
    })
  );

  search.addWidget(
    instantsearch.widgets.pagination({
      container: '#pagination',
    })
  );

  search.addWidget(
   instantsearch.widgets.configure({
    hitsPerPage: 5,
   })
  );

  // initialize hits widget
  search.addWidget(
    instantsearch.widgets.hits({
      container: '#hits',
      limit: 5,
      routing: true,
      templates: {
        item: {{ safeHTML `{{{ render }}}`  }},
     }
    })
  );

  search.start();
})();
</script>
{{ end }}
