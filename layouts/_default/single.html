{{ define "main" }}
{{- $showBreadcrumbs := $.Params.showBreadcrumbs | default $.Site.Params.showBreadcrumbs | default true }}





<div class="article-grid">
<div class="left-sidebar" style="position: relative">
      <div class="d-none d-md-block" style="position: absolute; top:0px; width: 100%; height: 90%; background: #010;"></div>
     
      {{- with .Params.headerImage.Src }}
          <img src="{{.}}" class="bg-white w-100 position-sticky" style="top:100px"> </img>
      {{- end }}
      <div class="d-none d-md-block" style="position: absolute; top:70%; width: 100%; height: 30%; background-image: linear-gradient(#fff0,white); pointer-events: none"></div>
</div>
<div class="title-bar">

    <div class="article-date"> {{ .PublishDate.Format "January 2, 2006" }} </div>
    
    <div class="article-title">{{ .Params.page_title | default .Title | markdownify }}</div>


    <div class="mb-2">

    {{ with .Params.authors  }}
      {{ range (partial "getauthors" .) }}
        <a class="pr-2 author" href="{{ .Permalink }}"> {{ .Title }} </a>
      {{ end }}
    {{ end }}

    </div>

    <div class="mb-5">
    {{- range .Params.categories }}
      {{- with $.Site.GetPage "taxonomyTerm" (printf "categories/%s" (urlize .)) }}
        <a class="tag-link" href="{{ .Permalink }}"> {{ .Title }} </a>
      {{- end }}
    {{- end }}
    </div>
    
</div>
<article class="article-cell pb-5">
      {{ .Content }}
</article>

<div class="right-sidebar pb-5">

		  <nav class="toc navbar pr-0" > 
            {{ .Page.TableOfContents | replaceRE "<li>" "<li class='nav-item'>"  | replaceRE "<ul>" "<ul class='nav'>"  | replaceRE  "<nav .*?>"  ""  | replaceRE  "</nav>"  ""| replaceRE "<a " "<a class='nav-link' "   | safeHTML }}
            
            <svg class="toc-marker" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
				<path stroke="#080" stroke-width="3" fill="transparent" stroke-dasharray="0, 0, 0, 1000" stroke-linecap="round" stroke-linejoin="round" transform="translate(-0.5, -0.5)" />
			</svg>
		  </nav>
</div>
</div>


<div style="background-color: #dfdfdf; min-height:1000">
<div class="container pt-5" >
  <div class="row justify-content-center pb-5 my-3 text-larger">

  </div>
</div>
</div>

{{ $related := .Site.RegularPages.Related . | first 3 }}
<div style="background-color: white; min-height:1000">
<div class="container pt-5" >
  <div class="row justify-content-center pb-5 my-3 text-larger">
      {{ partial "heading" (dict "Text" "Related Articles" "Class" "heading-black") }}
	  {{ range $related }}
	     {{ .Render "mediabox2" }}
	  {{ end }}

  </div>
</div>
</div>
<!--
    <div class="row justify-content-center pb-5 mb-5">
        <div class="col-lg-12 border-top mt-5">
	{{ if .PrevPage }}
        <div class="w-50 d-inline-block float-left"> <a class="link-reverse" href="{{ .PrevPage.Permalink }}">{{ .PrevPage.Title }}</a> </div>
	{{ end }}

        {{ if .NextPage }}
        <div class="w-50 text-right d-inline-block float-right"> <a class="link-reverse" href="{{ .NextPage.Permalink }}">{{ .NextPage.Title }}</a> </div>
        {{ end }}

        </div>
    </div>
    
-->

<script type="application/json" class="js-hypothesis-config">
  {
    "theme": "clean"
  }
</script>
<script src="https://hypothes.is/embed.js" async></script>


{{- end }}
